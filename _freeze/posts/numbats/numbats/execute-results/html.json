{
  "hash": "7222af31e4ac7dd0434fe905f302d9fe",
  "result": {
    "markdown": "---\ntitle: \"Numbats\"\noutput: html_document\ndate: \"2023-03-05\"\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(dplyr)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n\nAttaching package: 'dplyr'\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n```\n:::\n\n```{.r .cell-code}\nlibrary(tidyr)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Get the Data\n\n# Read in with tidytuesdayR package \n# Install from CRAN via: install.packages(\"tidytuesdayR\")\n# This loads the readme and all the datasets for the week of interest\n\n# Either ISO-8601 date or year/week works!\n\ntuesdata <- tidytuesdayR::tt_load('2023-03-07')\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n--- Compiling #TidyTuesday Information for 2023-03-07 ----\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n--- There is 1 file available ---\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n--- Starting Download ---\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n\n\tDownloading file 1 of 1: `numbats.csv`\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n--- Download complete ---\n```\n:::\n\n```{.r .cell-code}\ntuesdata <- tidytuesdayR::tt_load(2023, week = 10)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n--- Compiling #TidyTuesday Information for 2023-03-07 ----\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n--- There is 1 file available ---\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n--- Starting Download ---\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n\n\tDownloading file 1 of 1: `numbats.csv`\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n--- Download complete ---\n```\n:::\n\n```{.r .cell-code}\nnumbats <- tuesdata$numbats\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Or read in the data manually\n\nnumbats <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2023/2023-03-07/numbats.csv')\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nRows: 805 Columns: 16\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr  (6): scientificName, taxonConceptID, recordID, dataResourceName, month,...\ndbl  (7): decimalLatitude, decimalLongitude, year, hour, prcp, tmax, tmin\nlgl  (1): dryandra\ndttm (1): eventDate\ndate (1): day\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlapply(numbats[c('scientificName', 'year', 'month', 'wday', 'hour', 'dryandra')] , table)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n$scientificName\n\n      Myrmecobius fasciatus Myrmecobius fasciatus rufus \n                        787                          18 \n\n$year\n\n1856 1902 1906 1954 1968 1969 1985 2000 2006 2007 2008 2009 2010 2011 2013 2014 \n   2    1    1    1    4    3    1    1    7    2   27   24    8   28   36  113 \n2015 2016 2017 2018 2019 2020 2021 2022 2023 \n   5   51   56   23   26   50   59   22    1 \n\n$month\n\nApr Aug Dec Feb Jan Jul Jun Mar May Nov Oct Sep \n  1   9 165  13  39   7   7  16  12 212  48  23 \n\n$wday\n\nFri Mon Sat Sun Thu Tue Wed \n 72 108  69  69  83  67  84 \n\n$hour\n\n  0   1   2   3   4   5   6   7   8   9  10  12  13  14  16  18  19  20  21  22 \n  4   9   4   6   4   5   9   4   1   2   1   3 451  34   2   3   4   2   2   2 \n\n$dryandra\n\nFALSE  TRUE \n  597   125 \n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nbarplot(table(numbats$month)[month.abb])\n```\n\n::: {.cell-output-display}\n![](numbats_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(rvest)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nnumbats_bio <- read_html(\"https://animalia.bio/numbat\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nall_tags <- html_nodes(numbats_bio, xpath = \"//*\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nall_tags %>% html_name() %>% table() %>% unlist()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n.\n       a        b     body      div   footer     form       h1       h2 \n     169        3        1      467        1        2        1       12 \n      h3     head   header     html        i      img    input      ins \n       6        1        2        1       15       19        4        3 \n      li     link     meta        p     path   script  section   select \n      17       13        9       42        3       17       15        1 \n    span    style      svg textarea    title       ul \n      50        1        3        1        1        2 \n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nall_h2_tags <- all_tags[html_name(all_tags) == 'h2']\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nall_h2_tags %>% html_text() %>% gsub(\"\\n\", \"\", .)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n [1] \"Appearance\"                             \n [2] \"Photos withNumbat\"                      \n [3] \"Distribution\"                           \n [4] \"Habits and Lifestyle\"                   \n [5] \"Diet and Nutrition\"                     \n [6] \"Mating Habits\"                          \n [7] \"Population\"                             \n [8] \"Fun Facts for Kids\"                     \n [9] \"References\"                             \n[10] \"Included in Lists\"                      \n[11] \"Related Animals\"                        \n[12] \"More Fascinating Animals to Learn About\"\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nselected_text <- numbats_bio %>% html_nodes(\"h1, h2, h3, p\") %>% html_text() %>% gsub(\"\\n\", \"\", .)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n(appearance_index <- grep(\"Appearance\", selected_text))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 35\n```\n:::\n\n```{.r .cell-code}\n(photos_index <- grep(\"Photos withNumbat\", selected_text))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 37\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nselected_text[36]\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"Once widely distributed and common throughout Australia, numbats are currently classified as endangered, occurring in small and scattered populations. This unusual marsupial lacks a pouch. Numbat is a diurnal animal, which plays an important role in the ecosystem of its habitat. In addition, this magnificent and charming animal serves as the emblem of Western Australia. \"\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nprint_text <- function(string) {\n  index <- grep(string, selected_text)\n  header_text <- selected_text[index]\n  p_text <- selected_text[index+1]\n  return(cat(header_text, p_text, sep=\"\\n\"))\n}\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nprint_text(\"Habits and Lifestyle\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nHabits and Lifestyle\nNumbats are generally solitary animals, socializing only when raising their offspring and during the mating seaosn, when a breeding pair lives in a nest. The main source of their food - termites - are active during the daytime hours. For this reason, numbats are also diurnal in order to be able to feed upon termites in the shallow galleries. They typically spend mid-morning and late afternoon feeding and wandering. Meanwhile, in summer and spring, numbats are known to be active for longer periods of time during the day, taking only a short rest during mid-day in their shelters. During autumn and winter, their routine moves slightly: in this period, they are usually active later in the morning, returning to their shelters earlier in the afternoon and then remaining active during mid-day. This flexibility of their habits suggests that numbats try to minimize thermoregulatory costs and derive maximum benefit from the daylight, consuming as many termites as possible. \n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nbarplot(table(numbats$hour)[1:24])\n```\n\n::: {.cell-output-display}\n![](numbats_files/figure-html/unnamed-chunk-17-1.png){width=672}\n:::\n:::\n\n\nThere are a disproportionately higher number of sightings during 12 PM-1 PM GMT period. This could have resulted from a data bias. Perhaps, most of the expeditions to sight the numbats were conducted during that interval. Or perhaps, the expedition team entered the data usually at that time. Looking at the Tidy Tuesday github page, it seems that the hour column was created from the eventDate column. Let's look at a few values.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nset.seed(42)\nsample((numbats %>% filter(!is.na(eventDate)))$eventDate, 25)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n [1] \"2000-09-27 21:00:00 UTC\" \"2016-11-17 13:00:00 UTC\"\n [3] \"2019-11-04 13:00:00 UTC\" \"2013-11-28 13:00:00 UTC\"\n [5] \"2019-11-08 13:00:00 UTC\" \"2019-11-06 13:00:00 UTC\"\n [7] \"2018-11-11 13:00:00 UTC\" \"2014-01-17 13:00:00 UTC\"\n [9] \"2016-10-18 13:00:00 UTC\" \"2020-11-08 13:00:00 UTC\"\n[11] \"2017-12-06 13:00:00 UTC\" \"2006-06-06 14:00:00 UTC\"\n[13] \"2014-12-20 13:00:00 UTC\" \"2009-03-16 13:00:00 UTC\"\n[15] \"2019-10-05 22:03:21 UTC\" \"2022-02-03 03:28:00 UTC\"\n[17] \"2017-11-17 13:00:00 UTC\" \"2021-10-18 13:00:00 UTC\"\n[19] \"2009-05-10 14:00:00 UTC\" \"2015-05-26 14:00:00 UTC\"\n[21] \"2008-12-12 13:00:00 UTC\" \"2014-12-24 13:00:00 UTC\"\n[23] \"2017-12-11 13:00:00 UTC\" \"2021-11-22 13:00:00 UTC\"\n[25] \"2014-12-09 13:00:00 UTC\"\n```\n:::\n:::\n\n\nA disproportionately high number of the events seem to have the time rounded up to the hour value. This could be a data entry decision in certain cases. However, it's not all of them. The more recent ones seem to have a detailed clock log. I am interested in the cases where it's not a rounded up time.\n\n\n::: {.cell}\n\n:::\n\n\nHowever, this high value is making it hard for us to compare values during other hours. So I am going to clamp it to 50 and plot again.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbarplot(table(numbats$hour)[1:24] %>% pmin(100))\n```\n\n::: {.cell-output-display}\n![](numbats_files/figure-html/unnamed-chunk-20-1.png){width=672}\n:::\n:::\n\n\nThe diurnal habit is not clear from this visualization. The period between 12 PM- 2 PM is certainly the most active period for them. However, sightings exist for the night hours as well.\n",
    "supporting": [
      "numbats_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}